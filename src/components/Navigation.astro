---
import { state } from '@/scripts/translate';
import { getPicture } from '@astrojs/image';
import ToggleLocale from './ToggleLocale.astro';
import ToggleTheme from './ToggleTheme.astro';

const { t } = state;

const pages = Object.entries(t.nav.pages);

const headshot = await getPicture({
  src: '/headshot.webp',
  widths: [36, 72],
  formats: ['avif'],
  aspectRatio: 1,
});
---

<nav class="relative flex-wrap flex gap-3 sm:gap-4 mt-16 text-lg [&_a]:transition-colors hover:[&_a]:text-gray-600 hover:dark:[&_a]:text-gray-300 items-center">
  <div class="flex flex-grow-[1] items-center gap-6 sm:gap-8">
    <a href="/" aria-label="Home">
      <picture>
        {headshot.sources.map((source) => <source srcset={source.srcset} type={source.type} sizes="36px" />)}
        <img src={(headshot.image as { src: string }).src} class="rounded" width={36} height={36} alt="" />
      </picture>
    </a>
    <a href="/" class="text-xl text-gray-800 font-hero sm:gap-8 dark:text-gray-100 hover:!text-gray-700 hover:dark:!text-gray-200">
      <span class="inline-block mb-1">Quinten Coret</span>
    </a>
    {pages.map(([page, name]) => (<a href={'/' + page} class="max-sm:hidden">{name}</a>))}
  </div>
  <ToggleTheme />
  <ToggleLocale />
</nav>
